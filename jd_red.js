/*
双十二红包
cron 0 0,20 * * * https://raw.githubusercontent.com/star261/jd/main/scripts/jd_red.js
* */
const $ = new Env('暖暖红包');
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
const flCode = $.isNode() ? (process.env.FLCODE2 ? process.env.FLCODE2 : '') : '';//懂的都懂
let cookiesArr = [];
if ($.isNode()) {
    Object.keys(jdCookieNode).forEach((item) => {
        cookiesArr.push(jdCookieNode[item])
    })
    if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => {
    };
} else {
    cookiesArr = [
        $.getdata("CookieJD"),
        $.getdata("CookieJD2"),
        ...$.toObj($.getdata("CookiesJD") || "[]").map((item) => item.cookie)].filter((item) => !!item);
}
var _0xod8='jsjiami.com.v6',_0xod8_=['‮_0xod8'],_0x70f3=[_0xod8,'wrDDh0caFw==','wovCmMKMKMKtJcKbHMKPw7XDtFbDoWPCqg==','w6skbVrDtVnCh8Kuw5AjwpjCvcOjw6ZNAMKUL8KtBcKEw5FCwqfDocKBXXxnwo7DhMK8wpnDocOMw5QyGRLCt1zDuDAmw5whw4sIM8OLYcOowplPF33DicO1wr4Ww7fCrMOp','w5UtwpkSBMKIw43Cq2HCtMOYw7/CqlPDo8Kvw4VyNQ==','w7DCnjbDpkbCocKwNsOVw6cfwpvDhcOcC8Kawro=','SsOJw4bDisOa','wqLCnMOtwqVY','d0XDgT7Dqg==','w6zCrsKQT8K+','ScOtw4TDl8Oz','T8KSElzCow==','w7PCphHDtgY=','wonDk8OSw5Jc','wq/CqMKHIsKE','aRMLwoMS','UMOiw4XCmsKb','Z2E0w4/Clg==','Y8KnKSx2','wr9Be1k=','woIed07Cvg==','wo5maX4+','wphraVoa','FBbCocK4Zg==','asO2w7fDlcOK','bAtIBk0=','TgjCkHh4','Rngdw5rCrw==','woHDqHYoEg==','wpvDrMO5w7xK','R8KVw4fDisO1','wofDisOPw7pB','GCHCkMKWccKm','bsKiPiJk','RgdMEFc=','w4xTZMKUwqM=','QcO7w7DDiC0=','CzLCsMKEwqs=','w7Mke0nCrlk=','fsKiPSVR','w7wJwqDDhS0R','Q1chw49C','w77CgTDDlDo=','IcO0ZhfCn8Ot','X1Njw4Ne','wp7Dllkzw5M=','w6jDl8K/HsO0','HDrCg8KjcMOuNsOndiZ+WzFgCsO3FcOIw44jw7/CmcOFwq3DoBcOX8OXwowpwo7DnMOBwqkbektTw4QwaV5AAsOsK8KaHDtvwpTDvWV/OGLDjjXChVnCrUPCpcKBMl/CosObw5p6LnTCs8KDX3g=','wqp+w6M=','w64odHzCq8KZesK1Em/CkDPCvcOPccO5Tl3Dn8KQw79Ww4F5CsOKwpx0wpd2wpNAS8OQw4bDlsKKIsOvKFZ7wrVgRTzCv1cQwpYpw6UKw4nCryk9bsKtw5vDvcOswoPDswjDt8OwwrHCuQ1TRWnCp0TCujHChhzDmcOoQlbDhsKMw6/DiDlxW8OtDcOCw4zCqcKQecO+w5vDrGLCgz7DjcKADzLCrzjCrcOqwo7ClEfCp8KXw4V3w743aQ==','CjzChsKpbA==','QlIcw5dh','Tj3DtA==','wpTDkHk1w4E=','w7MucmvCqEM=','RMKTw4TDhMOR','wobCknfDpHA=','wpZAb2Mk','wpLCocK5w67CuA==','wpx0wopFRQ==','Ql46','w47CpcKffMK1','wrXDhcOxCMO0','w6DClsKOTsKT','wqTCu8KWw73Csg==','FyvCj8KMYA==','wpVpY0kI','wrjChcK0K8KK','XS90EVY=','RBc8wrQiBQ==','w7vCizg=','T0wYw7k=','wrNh5aSk6LSLw7sR5Y2s5ZijwoYv','wrvCnMK8w5zCkQ==','wqVzw7d2wq3Ct3I7VSHCssKYw5sHwqfDiw==','YjAQwoQ1','worDinQ8Eg==','KjjCrcKNX8OS','woJ6w5pQwoM=','SjDDoQwmbg==','wqlCZ0If','X8OSw6nDjwQ=','wrzCicOKwph6wqk=','c8KrCwNm','ScKWw4bDpsO0','cMOQw5rDvTk=','w6jCgSjDlAXDnw==','w5LDiiDCl8K3','KGxGw6zDqg==','wqxlw6BiwrvDq20lEjzDrMOJw4NTw7DCn8KU','CcKROw==','wrBMwq5sUQ==','woDCr03DhH0=','wpfDvcOOw6hK','TcKSw57DrsOh','wp9TwpIfDw==','WMOOesKYw4g=','wq3DnsOsG8OFw64=','w7x1asKzwqg=','44GW5o+I56Se44Kw6K2L5Yay6Iyf5Y215Li05LqO6LWW5Y6U5LiJw4MnFQzCox1Z55qe5o2v5LyO55eCFQNhBxp+55iB5LmK5LuL566M5Yiz6I6z5Y66','wqpGwp1ETcO4wpwLwpN1w5TDuQnChCxLwpnCm8KBaAYpRcOQwqXDlDU2bcKpw57DnMO6e1ZiUMKUODBkw5wO','wp1Lw4BVwoo=','YcKXJw==','w7TCgSvDlQ==','NzHCh8K+Xw==','f8KlElzCgg==','WhnDki0F','U8OGw5XCvMK6','wrDCn8KN','J8KcAMOZw7I=','w7bChSjDlx7Dmg==','UARnXys=','wq9KwopTew==','w7fCmCXDly8=','wrLCn8Kdw4HCj0M=','ZW3CssKs','wpZWw53Csng=','wp4Hb8OLEw==','bFMBw5pq','Q8Kfw4fDrsOywoM=','ZcO7w68=','Wy3CpA==','JXlQw4LDlA==','RBc8','e3nCrMKh','Gn7lpJHotJdIG+WOhuWYlWZ8','wptSwosZBMKuwpI=','WMOFbMKx','wqx5woF3SsKaw6k=','OMKBLMOtw7k=','XsOBbsKZw6w=','RDtTQg==','BsKRLsOHw43Ds2Y=','NX1QwozDn8KVw4fDiMOxw7c=','w4fCh8KANcKTCMOrw7HCt8KM','X1bDqgHDtQ==','KXpOw4TDn8KO','SWglw69e','EMO6XDfCmw==','LD3CnsKK','wpZgwplOWg==','wr7CrsOhwox4','IsKbKMONw6w=','a3I+w5NC','wq5dwopVSsKrw5xK','wp7DlMK1GcOWQUg/','IjjCi8KbwoPCigTCj3LDjH8rw50vQMOLG8OKwrskw5dzwoY4CcO8w6c=','b8Orw5HDpgs=','w4DCp8OMecOmY8KOH8OEw6vDpxfDsGfDqDzDshLDpiDDh0vChcOlwrgzwpYFw7jDksOkw5Jnw6TDh0jDpWfDgsKBAlYpw5nDmMOTw5XDkcK1w7h2wqE=','CcKFAcO7w40=','HMOyw5/CoMKBwrstwqAdwos=','wqnCmcOqwqRw','wqHCiiLDox/DgsOJw45awoBtw4ZKw4rDhVVYYnTClMKZWsO1w4xwG8OPw5A0OAwdVhPClcO1LEEJwppbQkNAw6LDvsOFw5VBwrfCtBJMwpfCvwASw4FBwp4ywoEqRBFYZcKUwoECSi/DosOyMcOwYF0iwrrDl1RsaMOZYsKCVMOtH1jCvj3Dj8OzwqTDmcKMwqA0IjDDswolw5c4w53CpMK3wq9aYsOwDcONLsKEfcO4K33CskVWwofDv8O9w7pNOsOFasOYwoM+w7dDV0wSOBwtwpjDp8O9w7XDvw==','AMKJDEYm','wojCmMKVw7TCnw==','GCvCmcK0d8K8','PAzCucKZSQ==','X8KCHBVB','ZjPDqDY3','wovCn8KQJA==','ehZqNw==','wpbDiG0G','XMKKw4XDoMOy','wrZAwoBZ','w6wRwq3Dnhg=','wpfCjsOWwrRk','SEMRw7nCvHce','IMOlZBrChA==','wqBOwqFOZw==','IcOweB/CkcOjw54=','wpbDjsODw41w','wp/Dp3kVw785','wrRww514wqQ=','wr/DmsKiG8OK','ZcO7w6vDnQY=','cg5JWh8=','w5opwofDpgg=','wrnDqMOzCMOi','XSzCklZK','AxXChcK7Tw==','woPCs8KbGsKd','dsOCWsKdw7s=','X8ORw4nDrcOf','w4PCtRDDmzk=','bhDCh3BT','wp3DmcKYIsOG','wofDunU/w60=','wrPCpMKUw6bCrw==','Ul0Zw7XCsA==','wpEpdVfCuA==','w4PDmCnCi8KD','TUHCgsK3wps=','N8KjNnwV','w6/DswPClQ==','wo5LwokRHA==','LS3CmcKcaQ==','MDPCgsKnwro=','w5cqw5wdAw==','Hz7CrcKlQQ==','Yw19OkbDtsKH','NS3Cr8KDXw==','wqRtwogrJg==','RDtQXghYfA==','wq5dwo5xTMKw','enPCucKgwro=','wpbCi8KXL8Kg','wqt6w6x2wrg=','wpBawpEbAA==','PsKCIGYD','wqVLwq8tKQ==','wp/DksKwFMO7','wpFUwoI=','w63liqzlpYDljYjChuWmrei3sQ==','wqNBb2gfQA==','H8O8XBfCug==','woFZw5JDwqw=','wr7CosKlHcKs','w75ecMKUwpo=','w5HCqsKyScK0','DBfCj8KFVg==','wpQYYsOiGg==','wrxQwopMTQ==','w6LCuT7Dpj8=','w57CisKsUcKp','wr/DvcKHDcO7','wpRMwqJ/ew==','w6wxeUfCrg==','wrwoWk/CkA==','cXApw611','wr3Ds2cAw44=','w7V3ZMKrwrs=','fhFwMg==','BQrCj8KBZw==','wpRVwoEdEMKNwo0=','NWhIw4jDiA==','wpjDp8OmDcO5','TsOPcsK4w6MqwpU=','H8OcRgvCgg==','wpvCuMK8w5XCmQ==','cMODw6fDqDs=','FsKtN8O1w70=','w77DlsKZHcOL','fwnCjmxk','UCEjwqcF','wrLCgcK5HMKO','wqLCh8OD','wrflipzlpqHlj67DoOWlmei3nA==','w59xQMKwwoo=','wooeWsO9Eg==','wq3DnsOs','auminuWPsue5suacoMOw','w74jdkrCv1fDg8Oywo48w43DuMKlwr0cWg==','wonDsMOZEcOz','BFjsjOgiami.cHzRom.Dqv6AdIBNr=='];if(function(_0xe3a4f,_0x35d8d4,_0x2c8c42){function _0x37a38a(_0x248255,_0x102ea3,_0x5045df,_0x34258f,_0x1cf9ef,_0x366250){_0x102ea3=_0x102ea3>>0x8,_0x1cf9ef='po';var _0x59a606='shift',_0x25acb4='push',_0x366250='‮';if(_0x102ea3<_0x248255){while(--_0x248255){_0x34258f=_0xe3a4f[_0x59a606]();if(_0x102ea3===_0x248255&&_0x366250==='‮'&&_0x366250['length']===0x1){_0x102ea3=_0x34258f,_0x5045df=_0xe3a4f[_0x1cf9ef+'p']();}else if(_0x102ea3&&_0x5045df['replace'](/[BFOgHzRDqAdIBNr=]/g,'')===_0x102ea3){_0xe3a4f[_0x25acb4](_0x34258f);}}_0xe3a4f[_0x25acb4](_0xe3a4f[_0x59a606]());}return 0xc269c;};return _0x37a38a(++_0x35d8d4,_0x2c8c42)>>_0x35d8d4^_0x2c8c42;}(_0x70f3,0x15e,0x15e00),_0x70f3){_0xod8_=_0x70f3['length']^0x15e;};function _0x7493(_0x296740,_0x1ae2b3){_0x296740=~~'0x'['concat'](_0x296740['slice'](0x1));var _0x4f15fa=_0x70f3[_0x296740];if(_0x7493['bfkfiP']===undefined){(function(){var _0x1f0a3c=function(){var _0x25a461;try{_0x25a461=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5bd5c0){_0x25a461=window;}return _0x25a461;};var _0x2b5022=_0x1f0a3c();var _0x3433a0='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x2b5022['atob']||(_0x2b5022['atob']=function(_0x54605e){var _0x44cf5a=String(_0x54605e)['replace'](/=+$/,'');for(var _0x1551ad=0x0,_0x16624b,_0x24bc31,_0x333c41=0x0,_0x350959='';_0x24bc31=_0x44cf5a['charAt'](_0x333c41++);~_0x24bc31&&(_0x16624b=_0x1551ad%0x4?_0x16624b*0x40+_0x24bc31:_0x24bc31,_0x1551ad++%0x4)?_0x350959+=String['fromCharCode'](0xff&_0x16624b>>(-0x2*_0x1551ad&0x6)):0x0){_0x24bc31=_0x3433a0['indexOf'](_0x24bc31);}return _0x350959;});}());function _0x1f8ea6(_0x5c6bb4,_0x1ae2b3){var _0x1a7115=[],_0x24c661=0x0,_0x337024,_0xe3b2c8='',_0x57736c='';_0x5c6bb4=atob(_0x5c6bb4);for(var _0x4f9ddb=0x0,_0x5c9c4f=_0x5c6bb4['length'];_0x4f9ddb<_0x5c9c4f;_0x4f9ddb++){_0x57736c+='%'+('00'+_0x5c6bb4['charCodeAt'](_0x4f9ddb)['toString'](0x10))['slice'](-0x2);}_0x5c6bb4=decodeURIComponent(_0x57736c);for(var _0x5272b7=0x0;_0x5272b7<0x100;_0x5272b7++){_0x1a7115[_0x5272b7]=_0x5272b7;}for(_0x5272b7=0x0;_0x5272b7<0x100;_0x5272b7++){_0x24c661=(_0x24c661+_0x1a7115[_0x5272b7]+_0x1ae2b3['charCodeAt'](_0x5272b7%_0x1ae2b3['length']))%0x100;_0x337024=_0x1a7115[_0x5272b7];_0x1a7115[_0x5272b7]=_0x1a7115[_0x24c661];_0x1a7115[_0x24c661]=_0x337024;}_0x5272b7=0x0;_0x24c661=0x0;for(var _0xbc717c=0x0;_0xbc717c<_0x5c6bb4['length'];_0xbc717c++){_0x5272b7=(_0x5272b7+0x1)%0x100;_0x24c661=(_0x24c661+_0x1a7115[_0x5272b7])%0x100;_0x337024=_0x1a7115[_0x5272b7];_0x1a7115[_0x5272b7]=_0x1a7115[_0x24c661];_0x1a7115[_0x24c661]=_0x337024;_0xe3b2c8+=String['fromCharCode'](_0x5c6bb4['charCodeAt'](_0xbc717c)^_0x1a7115[(_0x1a7115[_0x5272b7]+_0x1a7115[_0x24c661])%0x100]);}return _0xe3b2c8;}_0x7493['tkrrxj']=_0x1f8ea6;_0x7493['COjkxP']={};_0x7493['bfkfiP']=!![];}var _0x3f9d95=_0x7493['COjkxP'][_0x296740];if(_0x3f9d95===undefined){if(_0x7493['RxAcQs']===undefined){_0x7493['RxAcQs']=!![];}_0x4f15fa=_0x7493['tkrrxj'](_0x4f15fa,_0x1ae2b3);_0x7493['COjkxP'][_0x296740]=_0x4f15fa;}else{_0x4f15fa=_0x3f9d95;}return _0x4f15fa;};!(async()=>{var _0x5164d1={'qlDTt':_0x7493('‫0','68do'),'sARSb':_0x7493('‫1','P^pg'),'tUzly':function(_0x14fb41,_0x31fed9){return _0x14fb41>_0x31fed9;},'IhOzZ':function(_0x5ac4ef,_0x8ee8eb){return _0x5ac4ef<_0x8ee8eb;},'fZGmB':function(_0x1743a7,_0x1be3c1){return _0x1743a7!==_0x1be3c1;},'mxcgE':_0x7493('‮2','2FUK'),'mrWBC':function(_0x539414,_0x42ae0c){return _0x539414+_0x42ae0c;}};if(!cookiesArr[0x0]){$[_0x7493('‫3','#ywh')]($[_0x7493('‮4','w#hq')],_0x5164d1[_0x7493('‮5','%f0y')],_0x5164d1[_0x7493('‮6','#ywh')],{'open-url':_0x5164d1[_0x7493('‮7','Y%eq')]});return;}if(_0x5164d1[_0x7493('‫8','OCc!')](Date[_0x7493('‮9','aX#9')](),0x17db485b000)){return;}var _0x565d15=[];for(var _0x5eac30=0x0;_0x5164d1[_0x7493('‫a','y$in')](_0x5eac30,cookiesArr[_0x7493('‫b','w#hq')]);_0x5eac30+=0x1e){if(_0x5164d1[_0x7493('‫c','b]*X')](_0x5164d1[_0x7493('‫d','P^pg')],_0x5164d1[_0x7493('‫e','w#hq')])){$[_0x7493('‫f','aX#9')](e,resp);}else{_0x565d15[_0x7493('‫10','Aznk')](cookiesArr[_0x7493('‮11','K*xa')](_0x5eac30,_0x5164d1[_0x7493('‮12','6WYN')](_0x5eac30,0x1e)));}}for(let _0x5eac30=0x0;_0x5164d1[_0x7493('‫13','Uz^9')](_0x5eac30,_0x565d15[_0x7493('‮14','4XSn')]);_0x5eac30++){const _0x3012e0=_0x565d15[_0x5eac30][_0x7493('‮15','e%Vp')]((_0x589888,_0x8c4338)=>main(_0x589888));await Promise[_0x7493('‮16','ZQf]')](_0x3012e0);}})()[_0x7493('‮17','68do')](_0x1d2310=>{$[_0x7493('‫18','Kvtf')]('','❌\x20'+$[_0x7493('‮19','Aznk')]+_0x7493('‫1a','b]*X')+_0x1d2310+'!','');})[_0x7493('‮1b','c05W')](()=>{$[_0x7493('‮1c','*%H#')]();});async function main(_0x230e7c){var _0x3ab2f3={'YfrHq':function(_0x58465a,_0xc42194){return _0x58465a===_0xc42194;},'YVmSN':function(_0xf3b9be,_0x2a514f){return _0xf3b9be+_0x2a514f;},'ObNZd':function(_0x54415f){return _0x54415f();},'gqNXe':function(_0x1ecee0,_0x30342b){return _0x1ecee0(_0x30342b);},'DZVSG':_0x7493('‫1d','P^pg'),'Vhopb':function(_0x2edb93,_0x4e34c2){return _0x2edb93>_0x4e34c2;},'zQzsb':function(_0x3b20b0,_0x3a31b7){return _0x3b20b0!==_0x3a31b7;},'TJmas':_0x7493('‫1e','y$in'),'OkhHP':_0x7493('‫1f','*%H#'),'ykbtB':function(_0x531db6,_0x4e5c74,_0x4ff4a6){return _0x531db6(_0x4e5c74,_0x4ff4a6);},'paIjl':function(_0x49333f,_0x5b820b){return _0x49333f(_0x5b820b);},'DPihv':function(_0x317ef1,_0x348d5a,_0x1c7e28,_0x375194){return _0x317ef1(_0x348d5a,_0x1c7e28,_0x375194);},'EHFQd':_0x7493('‫20','b]*X'),'xYxVU':_0x7493('‫21','y$in'),'gmZkJ':_0x7493('‫22','68do'),'JhXIy':_0x7493('‮23','q7)e'),'TQOMS':_0x7493('‮24','XwyW'),'txbMf':function(_0xcbe12b,_0x21971f){return _0xcbe12b!=_0x21971f;},'mTnbR':_0x7493('‮25','68do'),'YcnOj':function(_0x13dba6,_0x19c6d2){return _0x13dba6===_0x19c6d2;},'XYCsQ':_0x7493('‮26','Uz^9'),'xohLI':_0x7493('‫27','NHJd'),'okxdp':_0x7493('‫28','aAU#'),'XpJUA':_0x7493('‫29','i76z'),'MiflY':_0x7493('‮2a','a$E9'),'LiTdJ':function(_0x35438e,_0x5a8c92,_0x516171,_0x4a50a1){return _0x35438e(_0x5a8c92,_0x516171,_0x4a50a1);},'mFQuY':function(_0x17b9f8,_0x1c9780){return _0x17b9f8!=_0x1c9780;},'tbAWB':function(_0x184474,_0x4d17d3){return _0x184474===_0x4d17d3;},'TKgME':_0x7493('‫2b','y$in'),'NqprE':_0x7493('‫2c','Uz^9'),'CWLkL':function(_0x17a257,_0x1d1382){return _0x17a257===_0x1d1382;},'LINxr':function(_0x2332fc,_0x2ff820){return _0x2332fc(_0x2ff820);},'piJBq':_0x7493('‫2d','P^pg'),'IkZPF':_0x7493('‮2e','b#12'),'YvHrE':function(_0x38dd9a,_0x28a7d7,_0x2fea62,_0x35cab3){return _0x38dd9a(_0x28a7d7,_0x2fea62,_0x35cab3);}};let _0x3142de=_0x7493('‮2f','aAU#')+_0x3ab2f3[_0x7493('‫30','e%Vp')](randomString,0x28)+_0x7493('‮31','85Tg')+_0x3ab2f3[_0x7493('‫32','y$in')](randomString,0xa)+_0x7493('‫33','OCc!')+_0x3ab2f3[_0x7493('‫34','a$E9')](randomString,0x6)+_0x7493('‮35','w#hq');let _0x1d238c=[_0x3ab2f3[_0x7493('‮36','h@tA')]];if(flCode&&_0x3ab2f3[_0x7493('‮37','aX#9')](flCode[_0x7493('‫38','4F*B')],0x0)){if(_0x3ab2f3[_0x7493('‫39','%f0y')](_0x3ab2f3[_0x7493('‮3a','#0s5')],_0x3ab2f3[_0x7493('‫3b','Y%eq')])){_0x1d238c[_0x7493('‮3c','85Tg')](flCode);_0x1d238c[_0x7493('‮3d','4qWk')](flCode);_0x1d238c[_0x7493('‫3e','kw%y')](flCode);}else{let _0x36bb68=ck[_0x7493('‮3f','4XSn')](';')[0x0][_0x7493('‮40','P^pg')]();if(_0x36bb68[_0x7493('‮41','Cmad')]('=')[0x1]){if(_0x3ab2f3[_0x7493('‮42','a$E9')](_0x1f1bff[_0x7493('‮43','kdRR')](_0x36bb68[_0x7493('‫44','NHJd')]('=')[0x1]),-0x1))_0x1f1bff+=_0x3ab2f3[_0x7493('‫45','i76z')](_0x36bb68[_0x7493('‮46','NHJd')](/ /g,''),';\x20');}}}let _0x174c3a=_0x1d238c[_0x3ab2f3[_0x7493('‮47','p!cT')](random,0x0,_0x1d238c[_0x7493('‫48','ct^6')])];let _0x1f1bff='';let _0x191c18=_0x3ab2f3[_0x7493('‫49','2FUK')](decodeURIComponent,_0x230e7c[_0x7493('‫4a','b#12')](/pt_pin=([^; ]+)(?=;?)/)&&_0x230e7c[_0x7493('‮4b','e%Vp')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);let _0x3fe0dd=await _0x3ab2f3[_0x7493('‮4c','b]*X')](getInfo1,_0x230e7c,_0x174c3a,_0x3142de);let _0x203079=_0x3fe0dd[_0x3ab2f3[_0x7493('‮4d','Cmad')]][_0x3ab2f3[_0x7493('‮4e','B@Gs')]][_0x3ab2f3[_0x7493('‮4f','ZQf]')]]||_0x3fe0dd[_0x3ab2f3[_0x7493('‫50','%f0y')]][_0x3ab2f3[_0x7493('‮51','85Tg')]][_0x3ab2f3[_0x7493('‮52','*%H#')]]||'';let _0x48b322='';if(_0x203079){if(_0x3ab2f3[_0x7493('‮53','fLKZ')](_0x3ab2f3[_0x7493('‫54','LL[q')],_0x3ab2f3[_0x7493('‮55','ZQf]')])){_0x3ab2f3[_0x7493('‫56','b#12')](resolve);}else{if(_0x3ab2f3[_0x7493('‮57','ct^6')](typeof _0x203079,_0x3ab2f3[_0x7493('‮58','aX#9')])){_0x48b322=_0x203079[_0x7493('‫59','kdRR')](',');}else{_0x48b322=_0x203079;}for(let _0x21021b of _0x48b322){if(_0x3ab2f3[_0x7493('‮5a','leZ3')](_0x3ab2f3[_0x7493('‮5b','xkoD')],_0x3ab2f3[_0x7493('‮5c','Aznk')])){let _0x42877f=_0x21021b[_0x7493('‮5d','h@tA')](';')[0x0][_0x7493('‫5e','xkoD')]();if(_0x42877f[_0x7493('‫5f','c05W')]('=')[0x1]){if(_0x3ab2f3[_0x7493('‫60','4F*B')](_0x3ab2f3[_0x7493('‮61','aAU#')],_0x3ab2f3[_0x7493('‫62','4QrE')])){if(_0x3ab2f3[_0x7493('‮63','%f0y')](_0x1f1bff[_0x7493('‫64','4qWk')](_0x42877f[_0x7493('‫65','%f0y')]('=')[0x1]),-0x1))_0x1f1bff+=_0x3ab2f3[_0x7493('‫66','c05W')](_0x42877f[_0x7493('‮67','b]*X')](/ /g,''),';\x20');}else{$[_0x7493('‫68','P^pg')](e,resp);}}}else{return;}}}}let _0x2e253f=_0x3fe0dd[_0x3ab2f3[_0x7493('‮69','Aznk')]][_0x7493('‮6a','85Tg')](/(https:\/\/u\.jd\.com\/jda[^']+)/)&&_0x3fe0dd[_0x3ab2f3[_0x7493('‫6b','2FUK')]][_0x7493('‫6c','c05W')](/(https:\/\/u\.jd\.com\/jda[^']+)/)[0x1]||'';if(!_0x2e253f){if(_0x3ab2f3[_0x7493('‫6d','h@tA')](_0x3ab2f3[_0x7493('‮6e','c05W')],_0x3ab2f3[_0x7493('‮6f','b#12')])){console[_0x7493('‫70','c05W')](_0x191c18+_0x7493('‮71','B@Gs'));return;}else{$[_0x7493('‫72','yX4%')](e,resp);}}let _0x43a183=await _0x3ab2f3[_0x7493('‮73','NHJd')](getInfo2,_0x2e253f,_0x230e7c+'\x20'+_0x1f1bff,_0x3142de);_0x203079=_0x43a183[_0x3ab2f3[_0x7493('‫74','2FUK')]]&&_0x43a183[_0x3ab2f3[_0x7493('‫75','85Tg')]][_0x3ab2f3[_0x7493('‫76','GMl5')]]&&(_0x43a183[_0x3ab2f3[_0x7493('‮77','q7)e')]][_0x3ab2f3[_0x7493('‫78','4F*B')]][_0x3ab2f3[_0x7493('‫79','6WYN')]]||_0x43a183[_0x3ab2f3[_0x7493('‫7a','i76z')]][_0x3ab2f3[_0x7493('‫7b','w#hq')]][_0x3ab2f3[_0x7493('‮7c','q7)e')]]||'')||'';_0x48b322='';if(_0x203079){if(_0x3ab2f3[_0x7493('‮7d','b#12')](typeof _0x203079,_0x3ab2f3[_0x7493('‮7e','i76z')])){_0x48b322=_0x203079[_0x7493('‫7f','AyAr')](',');}else{if(_0x3ab2f3[_0x7493('‫80','leZ3')](_0x3ab2f3[_0x7493('‮81','Uz^9')],_0x3ab2f3[_0x7493('‫82','ct^6')])){_0x48b322=_0x203079[_0x7493('‮83','GMl5')](',');}else{_0x48b322=_0x203079;}}for(let _0x2cd2b0 of _0x48b322){let _0x42877f=_0x2cd2b0[_0x7493('‫5f','c05W')](';')[0x0][_0x7493('‫84','4qWk')]();if(_0x42877f[_0x7493('‫44','NHJd')]('=')[0x1]){if(_0x3ab2f3[_0x7493('‮85','%f0y')](_0x1f1bff[_0x7493('‮86','c05W')](_0x42877f[_0x7493('‫87','68do')]('=')[0x1]),-0x1))_0x1f1bff+=_0x3ab2f3[_0x7493('‮88','B@Gs')](_0x42877f[_0x7493('‮89','*%H#')](/ /g,''),';\x20');}}}let _0x6c7e2b=_0x3ab2f3[_0x7493('‫8a','NHJd')](decodeURIComponent,_0x43a183[_0x3ab2f3[_0x7493('‫74','2FUK')]]&&_0x43a183[_0x3ab2f3[_0x7493('‮8b','aX#9')]][_0x3ab2f3[_0x7493('‫8c','e%Vp')]]&&(_0x43a183[_0x3ab2f3[_0x7493('‫74','2FUK')]][_0x3ab2f3[_0x7493('‮8d','y$in')]][_0x3ab2f3[_0x7493('‫8e','vdUj')]]||_0x43a183[_0x3ab2f3[_0x7493('‫8f','ZQf]')]][_0x3ab2f3[_0x7493('‮90','Kvtf')]][_0x3ab2f3[_0x7493('‮91','85Tg')]]||'')||'');if(!_0x6c7e2b){console[_0x7493('‫92','a$E9')](_0x191c18+_0x7493('‮93','xkoD'));return;}await _0x3ab2f3[_0x7493('‫94','GMl5')](getcouponUrl,_0x6c7e2b,_0x230e7c+'\x20'+_0x1f1bff,_0x3142de);let _0xf8958e=await _0x3ab2f3[_0x7493('‮95','6WYN')](getCoupons,_0x230e7c+'\x20'+_0x1f1bff,_0x3142de);console[_0x7493('‮96','B@Gs')](_0x191c18+_0x7493('‮97','68do')+_0xf8958e);}function getcouponUrl(_0x5ee6ec,_0x4c449d,_0x2346e4){var _0x207112={'oIuTg':function(_0x33fb8c,_0x26109b){return _0x33fb8c(_0x26109b);},'ltIYM':function(_0x39584d){return _0x39584d();},'jPgWR':function(_0x1d4e0f,_0x422c25){return _0x1d4e0f||_0x422c25;},'xLdWn':_0x7493('‮98','AyAr'),'lmwIN':function(_0x40eec5,_0x4ad5eb){return _0x40eec5<_0x4ad5eb;},'CvRSC':function(_0xbea11a,_0x242ba7){return _0xbea11a*_0x242ba7;},'iFWFl':function(_0x476d91,_0x153c60){return _0x476d91===_0x153c60;},'fvskn':_0x7493('‮99','B@Gs'),'TBdnL':_0x7493('‫9a','kw%y'),'AkPrB':_0x7493('‫9b','85Tg'),'wqjJX':_0x7493('‫9c','AyAr'),'FLASR':_0x7493('‫9d','4QrE'),'hoXXD':_0x7493('‫9e','LL[q')};return new Promise(_0x371f28=>{var _0x5dd923={'JTlVl':function(_0x335aaa,_0x6ce8a4){return _0x207112[_0x7493('‮9f','fLKZ')](_0x335aaa,_0x6ce8a4);},'AHaSS':function(_0x26b8f7){return _0x207112[_0x7493('‮a0','a$E9')](_0x26b8f7);},'WEaww':function(_0x1cdc78,_0x445e6c){return _0x207112[_0x7493('‮a1','XwyW')](_0x1cdc78,_0x445e6c);},'RKbRM':_0x207112[_0x7493('‮a2','q7)e')],'OvDKw':function(_0x4c1fa9,_0x585162){return _0x207112[_0x7493('‮a3','fLKZ')](_0x4c1fa9,_0x585162);},'fhQYs':function(_0x3d3a30,_0x76cbc1){return _0x207112[_0x7493('‮a4','#ywh')](_0x3d3a30,_0x76cbc1);},'tIXEx':function(_0x3ecab0,_0x424cef){return _0x207112[_0x7493('‮a5','w#hq')](_0x3ecab0,_0x424cef);},'gUhFk':_0x207112[_0x7493('‮a6','p!cT')],'honCs':_0x207112[_0x7493('‫a7','85Tg')]};const _0x369795={'url':_0x5ee6ec,'headers':{'Host':_0x207112[_0x7493('‮a8','Kvtf')],'Accept':_0x207112[_0x7493('‫a9','OCc!')],'User-Agent':_0x2346e4,'Accept-Language':_0x207112[_0x7493('‫aa','kdRR')],'Accept-Encoding':_0x207112[_0x7493('‫ab','#0s5')],'Cookie':_0x4c449d}};$[_0x7493('‫ac','yX4%')](_0x369795,async(_0x2ef9fe,_0x319624,_0x20c333)=>{var _0x1c1349={'ejOVV':function(_0x12ea9e,_0x3b7e0d){return _0x5dd923[_0x7493('‫ad','leZ3')](_0x12ea9e,_0x3b7e0d);},'LdUOi':function(_0x5b7ee3){return _0x5dd923[_0x7493('‮ae','yX4%')](_0x5b7ee3);},'IaovC':function(_0x172862,_0x157b79){return _0x5dd923[_0x7493('‮af','yX4%')](_0x172862,_0x157b79);},'CnZoX':_0x5dd923[_0x7493('‮b0','%f0y')],'ujLQc':function(_0x1fd7db,_0x54a43b){return _0x5dd923[_0x7493('‫b1','fLKZ')](_0x1fd7db,_0x54a43b);},'ieoBP':function(_0x4c50b6,_0x111144){return _0x5dd923[_0x7493('‫b2','4qWk')](_0x4c50b6,_0x111144);}};if(_0x5dd923[_0x7493('‫b3','ZQf]')](_0x5dd923[_0x7493('‮b4','kdRR')],_0x5dd923[_0x7493('‫b5','kw%y')])){try{}catch(_0x2b9443){if(_0x5dd923[_0x7493('‮b6','p!cT')](_0x5dd923[_0x7493('‮b7','4XSn')],_0x5dd923[_0x7493('‫b8','p!cT')])){$[_0x7493('‮b9','4F*B')](_0x2b9443,_0x319624);}else{try{_0x1c1349[_0x7493('‮ba','#0s5')](_0x371f28,_0x20c333);}catch(_0x3c9336){$[_0x7493('‫68','P^pg')](_0x3c9336,_0x319624);}finally{_0x1c1349[_0x7493('‫bb','4qWk')](_0x371f28);}}}finally{_0x5dd923[_0x7493('‫bc','GMl5')](_0x371f28,_0x20c333);}}else{e=_0x1c1349[_0x7493('‫bd','e%Vp')](e,0x20);let _0xe54073=_0x1c1349[_0x7493('‮be','aAU#')],_0xeca3cf=_0xe54073[_0x7493('‮bf','AyAr')],_0x95241a='';for(i=0x0;_0x1c1349[_0x7493('‫c0','#0s5')](i,e);i++)_0x95241a+=_0xe54073[_0x7493('‮c1','Cmad')](Math[_0x7493('‫c2','Uz^9')](_0x1c1349[_0x7493('‫c3','LL[q')](Math[_0x7493('‮c4','NHJd')](),_0xeca3cf)));return _0x95241a;}});});}async function getCoupons(_0x2df191,_0x570459){var _0x56dc71={'mTNAX':function(_0x4dcce8,_0x12a8e5){return _0x4dcce8(_0x12a8e5);},'fhlAN':function(_0x45f01f){return _0x45f01f();},'LaECG':_0x7493('‫c5','Uz^9'),'giRwQ':_0x7493('‫9e','LL[q')};return new Promise(_0x37d828=>{var _0x564e31={'gRnGJ':function(_0x356b53,_0x339843){return _0x56dc71[_0x7493('‮c6','ct^6')](_0x356b53,_0x339843);},'kimMW':function(_0x5d4211){return _0x56dc71[_0x7493('‫c7','vdUj')](_0x5d4211);}};let _0x578a81={'url':_0x7493('‫c8','4F*B')+Date[_0x7493('‮c9','2FUK')]()+_0x7493('‫ca','leZ3'),'headers':{'Accept-Language':_0x56dc71[_0x7493('‫cb','%f0y')],'Accept-Encoding':_0x56dc71[_0x7493('‮cc','Uz^9')],'Cookie':_0x2df191,'user-agent':_0x570459}};$[_0x7493('‮cd','Y%eq')](_0x578a81,async(_0x27f34b,_0x36db4e,_0x26504)=>{try{_0x564e31[_0x7493('‮ce','ct^6')](_0x37d828,_0x26504);}catch(_0x10c870){$[_0x7493('‫cf','AyAr')](_0x10c870,_0x36db4e);}finally{_0x564e31[_0x7493('‮d0','4XSn')](_0x37d828);}});});}async function getInfo2(_0x1e10fd,_0x22a42f,_0x2a837d){var _0x24871f={'ZGkde':function(_0x3b2eab,_0x5ddd46){return _0x3b2eab!==_0x5ddd46;},'ttzVC':_0x7493('‮d1','9(e0'),'QvLfK':function(_0x199917,_0x298d0d){return _0x199917(_0x298d0d);},'CoWgB':_0x7493('‮d2','yX4%'),'WLmNh':_0x7493('‫d3','aX#9'),'elFXl':function(_0x1a45e6){return _0x1a45e6();}};return new Promise(_0x88f22e=>{var _0x5a0fa3={'zKlyO':function(_0x5a2a2b){return _0x24871f[_0x7493('‫d4','i76z')](_0x5a2a2b);}};const _0x3d04e5={'url':_0x1e10fd,'followRedirect':![],'headers':{'Cookie':_0x22a42f,'user-agent':_0x2a837d}};$[_0x7493('‫d5','Uz^9')](_0x3d04e5,async(_0x7f08cd,_0x1efa04,_0x322e6e)=>{try{if(_0x24871f[_0x7493('‫d6','q7)e')](_0x24871f[_0x7493('‫d7','B@Gs')],_0x24871f[_0x7493('‮d8','q7)e')])){_0x5a0fa3[_0x7493('‫d9','aX#9')](_0x88f22e);}else{_0x24871f[_0x7493('‫da','%f0y')](_0x88f22e,{'resp':_0x1efa04,'data':_0x322e6e});}}catch(_0x3d86a5){if(_0x24871f[_0x7493('‫db','yX4%')](_0x24871f[_0x7493('‮dc','85Tg')],_0x24871f[_0x7493('‮dd','4qWk')])){$[_0x7493('‮de','Kvtf')](_0x3d86a5,_0x1efa04);}else{$[_0x7493('‫df','LL[q')]('','❌\x20'+$[_0x7493('‫e0','kdRR')]+_0x7493('‮e1','AyAr')+_0x3d86a5+'!','');}}finally{_0x24871f[_0x7493('‮e2','aX#9')](_0x88f22e);}});});}function randomString(_0x26bf11){var _0x19d6a5={'JHKue':function(_0x2030a9,_0xdc619a){return _0x2030a9||_0xdc619a;},'lwjRk':_0x7493('‫e3','2FUK'),'FkNBK':function(_0x14ff6f,_0x5097c6){return _0x14ff6f<_0x5097c6;},'WHvqj':function(_0x316424,_0xde543c){return _0x316424*_0xde543c;}};_0x26bf11=_0x19d6a5[_0x7493('‮e4','Kvtf')](_0x26bf11,0x20);let _0x375918=_0x19d6a5[_0x7493('‫e5','kw%y')],_0x1fbf05=_0x375918[_0x7493('‫e6','%f0y')],_0x4a12e4='';for(i=0x0;_0x19d6a5[_0x7493('‮e7','2FUK')](i,_0x26bf11);i++)_0x4a12e4+=_0x375918[_0x7493('‮e8','Y%eq')](Math[_0x7493('‫e9','yX4%')](_0x19d6a5[_0x7493('‫ea','e%Vp')](Math[_0x7493('‮eb','a$E9')](),_0x1fbf05)));return _0x4a12e4;}function random(_0x3c9e01,_0x16f798){var _0x127e3d={'xczwT':function(_0x195ac1,_0x43f937){return _0x195ac1+_0x43f937;},'xJECW':function(_0x531744,_0x3e23d5){return _0x531744*_0x3e23d5;},'IKJoe':function(_0xaf16c8,_0x1441dd){return _0xaf16c8-_0x1441dd;}};return _0x127e3d[_0x7493('‮ec','#0s5')](Math[_0x7493('‫ed','4XSn')](_0x127e3d[_0x7493('‮ee','e%Vp')](Math[_0x7493('‮ef','w#hq')](),_0x127e3d[_0x7493('‫f0','xkoD')](_0x16f798,_0x3c9e01))),_0x3c9e01);}async function getInfo1(_0x57cc8f,_0x40e1ae,_0x3012c9){var _0x3c8577={'ITbqx':function(_0x52190b,_0xa04eb1){return _0x52190b(_0xa04eb1);},'BxOhL':function(_0x435222,_0x101214){return _0x435222(_0x101214);},'xXoQx':function(_0x5daf1c,_0x4bbda9){return _0x5daf1c!==_0x4bbda9;},'bhwgg':_0x7493('‮f1','68do'),'zrbqg':function(_0x318fb8){return _0x318fb8();}};return new Promise(_0x104952=>{const _0x3f8d2b={'url':_0x7493('‫f2','2FUK')+_0x40e1ae,'followRedirect':![],'headers':{'Cookie':_0x57cc8f,'user-agent':_0x3012c9}};$[_0x7493('‮f3','y$in')](_0x3f8d2b,async(_0x4ce0fc,_0x18ec9c,_0x5e95e6)=>{var _0x58ea5d={'ddxLJ':function(_0x457e8b,_0xb23cbc){return _0x3c8577[_0x7493('‮f4','i76z')](_0x457e8b,_0xb23cbc);}};try{_0x3c8577[_0x7493('‮f5','9(e0')](_0x104952,{'resp':_0x18ec9c,'data':_0x5e95e6});}catch(_0x609cd0){if(_0x3c8577[_0x7493('‫f6','p!cT')](_0x3c8577[_0x7493('‫f7','4XSn')],_0x3c8577[_0x7493('‫f8','c05W')])){_0x58ea5d[_0x7493('‮f9','*%H#')](_0x104952,_0x5e95e6);}else{$[_0x7493('‫fa','B@Gs')](_0x609cd0,_0x18ec9c);}}finally{_0x3c8577[_0x7493('‫fb','GMl5')](_0x104952);}});});};_0xod8='jsjiami.com.v6';
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
